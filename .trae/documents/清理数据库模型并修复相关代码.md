# 数据库模型清理计划

## 1. 修改 `apps/backend/prisma/schema.prisma`

- **User**: 移除 `studentId`, `realName`, `isVerified`, `creditScore`, `creditLevel`, `ecoPoints`, `schoolId`。添加 `school String?`。
- **Item**: 移除 `originalPrice`, `schoolId`, `location`, `type`, `views`。将 `categoryId` 替换为 `category String`。
- **Order**: 移除 `orderNo`, `sellerId`, `type`, `deposit`, `payMethod`, `payTime`, `deliveryType`, `deliveryFee`, `address`, `contactPhone`。
- **删除模型**: `School`, `Category`, `Favorite`。

## 2. 修复受影响的 API 代码

- **`app/api/auth/register/route.ts`**:
  - `prisma.user.create`: 移除 `creditScore`, `creditLevel`, `ecoPoints`。
  - `select`: 移除 `isVerified`。
- **`app/api/users/me/route.ts`**:
  - `GET`: 移除 `select` 中的 `studentId`, `realName`, `isVerified`, `credit*`, `ecoPoints`。
  - `PATCH`: 移除 `select` 中的 `isVerified`, `creditScore`。

## 3. 生成与同步

- 运行 `npx prisma generate`。
- 运行 `npx prisma db push` (如果 Docker 运行中)。
